<!DOCTYPE html>
<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script> -->
<!-- Autoplay is allowed. -->
<html>
	 <script type="text/javascript">

			 
		
		if ('speechSynthesis' in window) {
			var synthesis = window.speechSynthesis;
		} else {
			alert("error NO speechSynthesis");
		}
		
		function hablar() {
			var speechtext;
			const params = new URLSearchParams(window.location.search);
			speechtext = params.get("mensaje"); 
			
				if (speechtext)
				{
				  utterance = new SpeechSynthesisUtterance(speechtext);
				  utterance.voice = synthesis.DefaultVoice;
				  utterance.volume = 1;
				  utterance.pitch = 0.5;
				  utterance.rate = 1;
				  utterance.lang = 'es-SP';
				  utterance.addEventListener('start', handleSpeechEvent);
				  utterance.addEventListener('end', handleSpeechEvent);
				  utterance.addEventListener('error', handleSpeechEvent);
				  utterance.addEventListener('boundary', handleSpeechEvent);
				  utterance.addEventListener('pause', handleSpeechEvent);
				  utterance.addEventListener('resume', handleSpeechEvent);

				  synthesis.speak(utterance);
				}
		  
		}

		function handleSpeechEvent(e) {
			  switch (e.type) {
				case 'start':
				  break;
				case 'end':
				  window.close();
				  break;
				case 'endEvent':
				case 'error':
				  alert('error: ' + e.error);
				  break;
				case 'boundary':
				  break;
				default:
				  break;
			  }
			};

		setTimeout(() => {hablar();}, 1);
	
	</script>

</html>
